{% extends "signin_base_template.html" %} {% block title %} View Passwords {%
endblock %} {% block content %}
<div class="container mt-5">
  <h3 class="mb-4 text-center">🔑 Saved Passwords</h3>
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Website / Details</th>
          <th scope="col">Username / Email</th>
          <th scope="col">Password</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for pw in passwords %}
        <tr>
          <th scope="row">{{ loop.index }}</th>
          <td>{{ pw.address }}</td>
          <td>{{ pw.name }}</td>
          <td>
            <input
              type="password"
              value="{{ pw.password }}"
              class="form-control form-control-sm"
              readonly
              id="pw{{ loop.index }}"
            />
          </td>
          <td>
            <!-- Show/Hide Button -->
            <button
              class="btn btn-sm btn-outline-secondary"
              onclick="togglePassword('pw{{ loop.index }}')"
            >
              👁 Show
            </button>

            <!-- Edit/Update Button -->
            <a
              href="{{ url_for('update_password', id=pw.id) }}"
              class="btn btn-sm btn-warning"
            >
              ✏️ Edit
            </a>

            <!-- Delete Button -->
            <form
              action="{{ url_for('delete_password', id=pw.id) }}"
              method="POST"
              style="display: inline"
              onsubmit="return confirm('Are you sure you want to delete this password?');"
            >
              <button type="submit" class="btn btn-sm btn-danger">
                🗑 Delete
              </button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="5" class="text-center">No passwords saved yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
  function togglePassword(id) {
    const field = document.getElementById(id);
    if (field.type === "password") {
      field.type = "text";
    } else {
      field.type = "password";
    }
  }
</script>
{% endblock %}
